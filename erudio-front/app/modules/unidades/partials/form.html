<!--* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *    @author Municipio de Itajaí - Secretaria de Educação - DITEC         *
 *    @updated 30/06/2016                                                  *
 *    Pacote: Erudio                                                       *
 *                                                                         *
 *    Copyright (C) 2016 Prefeitura de Itajaí - Secretaria de Educação     *
 *                       DITEC - Diretoria de Tecnologias educacionais     *
 *                        ditec@itajai.sc.gov.br                           *
 *                                                                         *
 *    Este  programa  é  software livre, você pode redistribuí-lo e/ou     *
 *    modificá-lo sob os termos da Licença Pública Geral GNU, conforme     *
 *    publicada pela Free  Software  Foundation,  tanto  a versão 2 da     *
 *    Licença   como  (a  seu  critério)  qualquer  versão  mais  nova.    *
 *                                                                         *
 *    Este programa  é distribuído na expectativa de ser útil, mas SEM     *
 *    QUALQUER GARANTIA. Sem mesmo a garantia implícita de COMERCIALI-     *
 *    ZAÇÃO  ou  de ADEQUAÇÃO A QUALQUER PROPÓSITO EM PARTICULAR. Con-     *
 *    sulte  a  Licença  Pública  Geral  GNU para obter mais detalhes.     *
 *                                                                         *
 *    Você  deve  ter  recebido uma cópia da Licença Pública Geral GNU     *
 *    junto  com  este  programa. Se não, escreva para a Free Software     *
 *    Foundation,  Inc.,  59  Temple  Place,  Suite  330,  Boston,  MA     *
 *    02111-1307, USA.                                                     *
 *                                                                         *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->

<div id="validate-unidade" class="row form-geral"> 
    <div class="col s12 mobile-full form-card-wrapper">
        <div class="row form-box show-form">
            <div class="card-panel fix-no-margin-card">
                <form id="unidadeForm" class="form-opacity-out">
                    <div class="row">
                        <h3 class='card-title-h3' style="padding: 20px">{{ acao }} Unidade de Ensino</h3>
                    </div>
                    <div class="row">                        
                        <div class="input-field col s12 m12 l6">
                            <i class="material-icons prefix">domain</i>
                            <select id="tipoUnidade" data-label="Tipo de Unidade" data-ng-model="unidade.tipo.id" data-ng-change="selecionarTipo(unidade.tipo.id)" class="validate" data-ng-disabled="!escrita" required>
                                <option selected disabled></option>
                                <option value="{{tipo.id}}" data-ng-selected="verificaSelectTipo(tipo.id)" data-ng-repeat="tipo in tipos">{{ tipo.nome | uppercase }}</option>
                            </select>
                            <label for="tipoUnidade">Tipo*</label>
                        </div>
                        <div class="input-field col s12 m12 l6">
                            <i class="material-icons prefix">assignment_ind</i>
                            <input id="cnpj" type="text" data-label="CNPJ" class="validate counter cnpj numeros" length="14" data-ng-model="unidade.cpfCnpj" data-ng-disabled="!escrita">
                            <label for="cnpj" data-error="CNPJ INVÁLIDO">CNPJ</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="input-field col s12 m12 l6">
                            <i class="material-icons prefix">account_circle</i>
                            <input id="nomeUnidadeEnsinoFocus" data-label="Nome da Unidade" type="text" class="validate" data-ng-model="unidade.nome" data-ng-disabled="!escrita" autofocus required />
                            <label for="nomeUnidadeEnsinoFocus">Nome da Unidade*</label>
                        </div>
                        <div class="input-field col s12 m12 l6">
                            <i class="material-icons prefix">email</i>
                            <input id="email" type="email" data-label="E-mail" class="validate" data-ng-model="unidade.email">
                            <label for="email" data-error="DIGITE UM EMAIL VÁLIDO">E-mail</label>
                        </div>                        
                    </div>
                    <div class="row">
                        <div class="input-field col s12 m12 l6">
                            <i class="material-icons prefix">account_balance</i>
                            <select data-label="Instituição" id="instituicaoPai" data-ng-model="unidade.instituicaoPai.id" class="validate" data-ng-disabled="!escrita">
                                <option value="{{ instituicao.id }}" data-ng-selected="verificaSelectInstituicao(instituicao.id)" data-ng-repeat="instituicao in instituicoes">{{ instituicao.nome | uppercase }}</option>
                            </select>
                            <label for="instituicaoPai">Instituição*</label>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 35px" data-ng-show="escrita || unidade.telefones.length">
                        <div class="col s12 m12 l12">
                            <h5 style="padding: 1rem;" class="no-margin ajuste-titulo-card">Contatos <small data-ng-show="escrita" class="hide-on-small-only" style="font-size: 1rem;">(clique no botão + para adicionar contatos)</small></h5>
                        </div>                        
                    </div>
                    <div class="row" style="margin-top: 15px" data-ng-show="escrita">
                        <div class="input-field col s12 m12 input-telefone" style="width: 30%">
                            <i class="material-icons prefix">phone</i>
                            <input data-label="Número de Telefone" id="telefone" type="text" length="15" class="validate counter" data-ng-model="telefone.numero">
                            <label for="telefone">Número*</label>
                        </div>
                        <div class="input-field col s12 m12 input-telefone" style="width: 30%">
                            <i class="material-icons prefix">settings_phone</i>
                            <select data-label="Descrição" id="descricao" data-ng-model="telefone.descricao">
                                <option disabled="" selected="" value=""></option>
                                <option data-ng-selected="telefone.descricao === 'CELULAR'" value="CELULAR">CELULAR</option>
                                <option data-ng-selected="telefone.descricao === 'COMERCIAL'" value="COMERCIAL">COMERCIAL</option>
                                <option data-ng-selected="telefone.descricao === 'RESIDENCIAL'" value="RESIDENCIAL">RESIDENCIAL</option>
                            </select>
                            <label for="descricao">Descrição*</label>
                        </div>
                        <div class="input-field col s12 m12 input-telefone">
                            <i class="material-icons prefix">contact_phone</i>
                            <input data-label="Falar Com" id="falarCom" type="text" class="validate" data-ng-model="telefone.falarCom">
                            <label for="falarCom">Falar com</label>
                        </div>                        
                        
                        <div class="col s12 m12 l3 right">
                            <a class="tooltipped btn-floating btn btn-telefone green waves-effect waves-light right"
                           data-position="left" data-delay="30"  
                           data-tooltip="Adicionar Telefone" data-ng-click="salvarTelefone(telefone)"><i class="material-icons">add</i></a>
                        </div>
                    </div>
                    <div class="row" style="padding-bottom: 20px">
                        <div class="col s12" data-ng-show="unidade.telefones.length">
                            <table class='highlight striped'>
                                <tbody>
                                    <tr data-ng-repeat="telefone in unidade.telefones" class="pointer">
                                        <td style="padding-left: 15px">{{ telefone.numero | telefone }}</td>
                                        <td style="padding-left: 15px">{{ telefone.descricao }}</td>
                                        <td style="padding-left: 15px">{{ telefone.falarCom | uppercase }} </td>
                                        <td class='center-align'>                                            
                                            <i data-ng-click="removerTelefone(telefone)" data-position='top' data-delay='50' data-tooltip='Remover Contato' class="material-icons modal-trigger delete-icon tooltipped">delete</i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>                    
                    
                    <div class="row">
                        <div class="col s12"><h5 style="padding: 1rem;" class="no-margin ajuste-titulo-card">Endereço</h5></div>
                    </div>
                    
                    <div class="row">
                        <div class="col s6">
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">my_location</i>
                                <input data-label="CEP" id="cep" type="text" length="8" class="validate counter cep" data-ng-model="unidade.endereco.cep" data-ng-change="buscaCEP(unidade.endereco.cep)" data-ng-disabled="!escrita" />
                                <label for="cep">CEP</label>
                            </div>
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">directions</i>
                                <input data-label="Logradouro" id="logradouro" data-ng-change="buscaCoordenadasPorEnderecoCompleto()" type="text" class="validate" data-ng-model="unidade.endereco.logradouro" data-ng-disabled="!escrita" required />
                                <label for="logradouro">Logradouro*</label>
                            </div>                
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">filter_1</i>
                                <input data-label="Número" id="numero" data-ng-change="buscaCoordenadasPorEnderecoCompleto()" type="text" length="10" class="validate counter numeros" data-ng-model="unidade.endereco.numero" data-ng-disabled="!escrita"/>
                                <label for="numero">Número</label>
                            </div>                  
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">receipt</i>
                                <input data-label="Complemento" id="complemento" type="text" class="validate" data-ng-model="unidade.endereco.complemento" data-ng-disabled="!escrita" />
                                <label for="complemento">Complemento</label>
                            </div>      
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">location_on</i>
                                <input data-label="Bairro" id="bairro" data-ng-change="buscaCoordenadasPorEnderecoCompleto()" type="text" class="validate" data-ng-model="unidade.endereco.bairro" data-ng-disabled="!escrita" />
                                <label for="bairro">Bairro</label>
                            </div>                            
                            <div class="input-field col s12 m12 l12">
                                <i class="material-icons prefix">location_on</i> 
                                <select data-label="Estado" id="estado" data-ng-model="estadoId" data-ng-change="selecionaEstado()" data-ng-disabled="!escrita" required>
                                   <option value="{{ estado.id }}" data-ng-selected="verificaSelectEstado(estado.id)" data-ng-repeat="estado in estados">{{ estado.nome | uppercase }}</option>
                                </select>
                                <label for="estado">Estado*</label>
                            </div>
                            <div data-ng-show="endereco.cidade.estado.id || estadoId" class="input-field estadoId col s12">
                                <i class="material-icons prefix">location_on</i>
                                <select data-label="Cidade" id="cidade" data-ng-model="cidadeId" data-ng-change="selecionaCidade()" data-ng-disabled="!escrita" required>
                                    <option value="" disabled selected></option>
                                    <option value="{{ cidade.id }}" data-ng-selected="verificaSelectCidade(cidade.id)" data-ng-repeat="cidade in cidades">{{ cidade.nome | uppercase }}</option>
                                </select>
                                <label for="cidade">Cidade*</label>
                            </div>   
                        </div>    
                        <div class="col s6 m6 l6">
                            <div id="mapa" class="col s12" style="margin: 1rem 0rem 1rem 0rem; height: 28.5rem;"></div>
                        </div>                  
                    </div>
                    <div class="row" style="margin-top: 35px">
                        <div class="col s12 m12 l12">
                            <h5 style="padding: 1rem;" class="no-margin ajuste-titulo-card">Cursos <small data-ng-show="escrita" class="hide-on-small-only" style="font-size: 1rem;">(clique no botão + para adicionar cursos)</small></h5>
                        </div>
                    </div>
                    <div class="row curso-box" data-ng-repeat="curso in cursos | orderBy: 'nome'" style="padding-left: 1.8rem">
                        <input type="checkbox" class="filled-in cursoUnidade" id="c{{curso.id}}" value="{{curso.id}}" data-ng-click="selecionarCurso(curso)" data-ng-disabled="!escrita" />
                        <label for="c{{curso.id}}" style="color: #212121"> {{ curso.nome | uppercase }} </label>                        
                    </div>
                    <div class="row end-card">
                        <a data-ng-click="finalizar()" class="right waves-effect waves-blue btn-flat"><i class="material-icons left">save</i>SALVAR</a>                        
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
