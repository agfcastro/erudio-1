<!--* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *    @author Municipio de Itajaí - Secretaria de Educação - DITEC         *
 *    @updated 30/06/2016                                                  *
 *    Pacote: Erudio                                                       *
 *                                                                         *
 *    Copyright (C) 2016 Prefeitura de Itajaí - Secretaria de Educação     *
 *                       DITEC - Diretoria de Tecnologias educacionais     *
 *                        ditec@itajai.sc.gov.br                           *
 *                                                                         *
 *    Este  programa  é  software livre, você pode redistribuí-lo e/ou     *
 *    modificá-lo sob os termos da Licença Pública Geral GNU, conforme     *
 *    publicada pela Free  Software  Foundation,  tanto  a versão 2 da     *
 *    Licença   como  (a  seu  critério)  qualquer  versão  mais  nova.    *
 *                                                                         *
 *    Este programa  é distribuído na expectativa de ser útil, mas SEM     *
 *    QUALQUER GARANTIA. Sem mesmo a garantia implícita de COMERCIALI-     *
 *    ZAÇÃO  ou  de ADEQUAÇÃO A QUALQUER PROPÓSITO EM PARTICULAR. Con-     *
 *    sulte  a  Licença  Pública  Geral  GNU para obter mais detalhes.     *
 *                                                                         *
 *    Você  deve  ter  recebido uma cópia da Licença Pública Geral GNU     *
 *    junto  com  este  programa. Se não, escreva para a Free Software     *
 *    Foundation,  Inc.,  59  Temple  Place,  Suite  330,  Boston,  MA     *
 *    02111-1307, USA.                                                     *
 *                                                                         *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->

<div id="validate" class="row form-geral">    
    <div class="col s12 mobile-full form-card-wrapper">
        <div class="row form-box show-form">
            <div class="card-panel fix-no-margin-card">
                <form id="instituicaoForm" class="form-opacity-out">
                    <div class="row">
                        <h3 class='card-title-h3' style="padding: 20px">{{ acao }} Instituição</h3>
                    </div>
                    <div class="row">                        
                        <div class="col s12 m12 l6 input-field">
                            <i class="material-icons prefix">account_circle</i>
                            <input id="nomeInstituicaoFocus" type="text" focus-on="focusMe" class="validate" data-ng-model="instituicao.nome" data-ng-disabled="!escrita" required />
                            <label for="nomeInstituicaoFocus">Nome da Instituição*</label>
                        </div>
                        <div class="col s12 m12 l6 input-field">
                            <i class="material-icons prefix">account_circle</i>
                            <input id="siglaInstituicao" type="text" class="validate" data-ng-model="instituicao.sigla" data-ng-disabled="!escrita"/>
                            <label for="siglaInstituicao">Sigla</label>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12 m6 l6 input-field">
                            <i class="material-icons prefix">assignment_ind</i>
                            <input id="cnpjInstituicao" type="text" class="validate counter cnpj numeros" length="18" data-ng-model="instituicao.cpfCnpj" data-ng-disabled="!escrita" />
                            <label for="cnpjInstituicao" data-error="CNPJ INVÁLIDO">C.N.P.J</label>
                        </div>
                        <div class="col s12 m6 l6 input-field">
                            <i class="material-icons prefix">email</i>
                            <input id="emailInstituicao" type="email" class="validate" data-ng-model="instituicao.email" data-ng-disabled="!escrita" required />
                            <label for="emailInstituicao" data-error="DIGITE UM E-MAIL VÁLIDO">E-Mail*</label>
                        </div>
                    </div>
                    <div class="row" style="margin-top: 35px">
                        <div class="col s12 m12 l12">
                            <h5 style="padding: 1rem;" class="no-margin ajuste-titulo-card">Contatos <small data-ng-show="escrita" class="hide-on-small-only" style="font-size: 1rem;">(clique no botão + para adicionar contatos)</small></h5>
                        </div>                        
                    </div>
                    <div class="row" style="margin-top: 15px" data-ng-show="escrita">
                        <div class="input-field col s12 m12 input-telefone" style="width: 30%">
                            <i class="material-icons prefix">phone</i>
                            <input id="telefoneInstituicao" type="text" length="15" class="validate counter" data-ng-model="telefone.numero">
                            <label for="telefoneInstituicao">Número*</label>
                        </div>
                        <div class="input-field col s12 m12 input-telefone" style="width: 30%">
                            <i class="material-icons prefix">settings_phone</i>
                            <select id="descricaoInstituicao" data-ng-model="telefone.descricao">
                                <option disabled="" selected="" value=""></option>
                                <option data-ng-selected="telefone.descricao === 'CELULAR'" value="CELULAR">CELULAR</option>
                                <option data-ng-selected="telefone.descricao === 'COMERCIAL'" value="COMERCIAL">TRABALHO</option>
                                <option data-ng-selected="telefone.descricao === 'RESIDENCIAL'" value="RESIDENCIAL">RESIDENCIAL</option>
                            </select>
                            <label for="descricaoInstituicao">Descrição*</label>
                        </div>                        
                        <div class="col s12 m12 l3 right">
                            <a class="tooltipped btn-floating btn btn-telefone green waves-effect waves-light right"
                           data-position="left" data-delay="30"  
                           data-tooltip="Adicionar Telefone" data-ng-click="salvarTelefone(telefone)"><i class="material-icons">add</i></a>
                        </div>
                    </div>
                    <div class="row" style="padding-bottom: 20px">
                        <div class="col s12" data-ng-show="instituicao.telefones.length">
                            <table class='highlight striped'>
                                <tbody>
                                    <tr data-ng-repeat="telefone in instituicao.telefones" class="pointer">
                                        <td style="padding-left:15px">{{ telefone.numero | telefone}}</td>
                                        <td style="padding-left:15px">{{ telefone.descricao }}</td>
                                        <td style="padding-left:15px">{{ telefone.falarCom | uppercase }} </td>
                                        <td class='center-align' data-ng-show="escrita">
                                            <i data-ng-click="removerTelefone(telefone)" data-position='left' data-delay='50' data-tooltip='Remover' class="material-icons modal-trigger delete-icon tooltipped">delete</i>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col s12"><h5 style="padding: 1rem;" class="no-margin ajuste-titulo-card">Endereço</h5></div>
                    </div>
                    <div class='row'>
                        <div class='col s6'>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">my_location</i>
                                <input id="cepInstituicao" type="text" length="8" class="validate counter cep" data-ng-model="instituicao.endereco.cep" data-ng-change="buscaCEP(instituicao.endereco.cep)" data-ng-disabled="!escrita" />
                                <label for="cepInstituicao">C.E.P</label>
                            </div>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">directions</i>
                                <input data-ng-change="buscaCoordenadasPorEnderecoCompleto()" id="logradouroInstituicao" type="text" class="validate" data-ng-model="instituicao.endereco.logradouro" data-ng-disabled="!escrita" required />
                                <label for="logradouroInstituicao">Logradouro*</label>
                            </div>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">filter_1</i>
                                <input data-ng-change="buscaCoordenadasPorEnderecoCompleto()" id="numeroInstituicao" type="text" length="10" class="validate counter numeros" data-ng-model="instituicao.endereco.numero" data-ng-disabled="!escrita" />
                                <label for="numeroInstituicao">Número</label>
                            </div>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">receipt</i>
                                <input id="complementoInstituicao" type="text" class="validate" data-ng-model="instituicao.endereco.complemento" data-ng-disabled="!escrita" />
                                <label for="complementoInstituicao">Complemento</label>
                            </div>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">location_on</i>
                                <input data-ng-change="buscaCoordenadasPorEnderecoCompleto()" id="bairroInstituicao" type="text" class="validate" data-ng-model="instituicao.endereco.bairro" data-ng-disabled="!escrita" required />
                                <label for="bairroInstituicao">Bairro*</label>
                            </div>
                            <div class="col s12 m12 l12 input-field">
                                <i class="material-icons prefix">location_on</i>
                                <select id="estadoInstituicao" data-ng-change="selecionaEstado()" data-ng-model="estadoId" data-ng-disabled="!escrita" required>
                                    <option value="{{ estado.id }}" data-ng-selected="verificaSelectEstado(estado.id)" data-ng-repeat="estado in estados">{{ estado.nome }}</option>
                                </select>
                                <label for="estadoInstituicao" class="ajuste-select-top-label">Estado*</label>
                            </div>
                            <div class="col s12 m12 l12 input-field" data-ng-show="instituicao.endereco.cidade.estado.id || estadoId">
                                <i class="material-icons prefix">location_on</i>
                                <select id="cidadeInstituicao" data-ng-change="selecionaCidade()" data-ng-model="cidadeId" data-ng-disabled="!escrita" required>
                                    <option value="{{ cidade.id }}" data-ng-selected="verificaSelectCidade(cidade.id)" data-ng-repeat="cidade in cidades">{{ cidade.nome }}</option>
                                </select>
                                <label for="cidadeInstituicao">Cidade*</label>
                            </div>
                        </div>
                        <div class="col s6 m6 l6">
                            <div id="mapa" class="col s12" style="margin: 14px 0px 14px 0px; height: 505px;"></div>
                        </div>
                    </div>                    
                    <div class="row end-card" data-ng-show="escrita">
                        <a id="salvarInstituicao" data-ng-click="finalizar()" class="right waves-effect waves-blue btn-flat"><i class="material-icons left">save</i>SALVAR</a>                        
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
