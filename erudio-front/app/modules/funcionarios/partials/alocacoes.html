<!--* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 *    @author Municipio de Itajaí - Secretaria de Educação - DITEC         *
 *    @updated 30/06/2016                                                  *
 *    Pacote: Erudio                                                       *
 *                                                                         *
 *    Copyright (C) 2016 Prefeitura de Itajaí - Secretaria de Educação     *
 *                       DITEC - Diretoria de Tecnologias educacionais     *
 *                        ditec@itajai.sc.gov.br                           *
 *                                                                         *
 *    Este  programa  é  software livre, você pode redistribuí-lo e/ou     *
 *    modificá-lo sob os termos da Licença Pública Geral GNU, conforme     *
 *    publicada pela Free  Software  Foundation,  tanto  a versão 2 da     *
 *    Licença   como  (a  seu  critério)  qualquer  versão  mais  nova.    *
 *                                                                         *
 *    Este programa  é distribuído na expectativa de ser útil, mas SEM     *
 *    QUALQUER GARANTIA. Sem mesmo a garantia implícita de COMERCIALI-     *
 *    ZAÇÃO  ou  de ADEQUAÇÃO A QUALQUER PROPÓSITO EM PARTICULAR. Con-     *
 *    sulte  a  Licença  Pública  Geral  GNU para obter mais detalhes.     *
 *                                                                         *
 *    Você  deve  ter  recebido uma cópia da Licença Pública Geral GNU     *
 *    junto  com  este  programa. Se não, escreva para a Free Software     *
 *    Foundation,  Inc.,  59  Temple  Place,  Suite  330,  Boston,  MA     *
 *    02111-1307, USA.                                                     *
 *                                                                         *
 * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->

<div class="row">
    <div class="col s12 m12 l12" style="font-size: 1rem; padding: 0.5rem">
        Carga horária preenchida
        {{ totalCargaHoraria }} / 
        <span data-ng-show="vinculo.cargaHoraria">{{ vinculo.cargaHoraria }}</span>
        <span data-ng-hide="vinculo.cargaHoraria">0</span>
    </div>  
</div>
<div class="row" data-ng-show="escrita && totalCargaHoraria < vinculo.cargaHoraria">
    <div class="input-field col s12 m5 l5" style="width: 45%">
        <i class="material-icons prefix">school</i>
        <span class="digitable-icon" data-ng-show="isAdmin"><i class="material-icons">border_color</i></span>
        <input id="unidadeAlocacao" class="dropdown" type="text" data-ng-model="nomeUnidade" data-ng-change="buscarUnidades()" data-activates="dropUnidadesAlocacao" data-ng-disabled="!isAdmin">
        <label for="unidadeAlocacao"><span data-ng-show="isAdmin">Busque aqui uma </span>Unidade*</label>
    </div>
    <div class="input-field col s12 m5 l5" style="width: 45%">
        <i class="material-icons prefix">query_builder</i>
        <input id="cargaHorariaAlocacao" type="number" class="validade counter numeros" data-ng-model="alocacao.cargaHoraria">
        <label for="cargaHorariaAlocacao">Carga Horária*</label>
    </div>
    <div class="col s1">
        <a class="tooltipped btn-floating btn waves-effect waves-light green right btn-alocacao" data-tooltip="Adicionar Alocação" data-position="left" data-delay="50" data-ng-click="prepararSalvarAlocacao()"><i class="material-icons">add</i></a>
    </div>
</div>
<table class="striped table-pattern" data-ng-show="alocacoes.length">
    <thead>
        <tr>
            <th>Unidade de Ensino</th>
            <th>Carga Horária</th>
            <th>Opções</th>
        </tr>            
    </thead>
    <tbody>
        <tr data-ng-repeat="alocacao in alocacoes">
            <td>{{alocacao.instituicao.nomeCompleto | uppercase}}</td>
            <td>{{alocacao.cargaHoraria}}h</td>
            <td><i data-ng-show="isAdmin || (escrita && unidadeId === alocacao.instituicao.id)" id="btn-remover-alocacao" class="material-icons modal-trigger delete-icon tooltipped" data-position="left" data-delay="50" data-tooltip="Remover Alocação" data-ng-click="excluirAlocacao(alocacao)">delete</i></td>
        </tr>
    </tbody>
</table>
<div class="row" style="margin-bottom: 0px" data-ng-show="escrita">
    <div class="col s12 m12 l12 end-card">
        <a data-ng-click="vincular(true)" style="margin-top: 10px; float: right; left: 0px; margin-bottom: 10px;" class="waves-effect waves-blue btn-flat" data-ng-disabled="vinculo.id"><i class="material-icons left">save</i>SALVAR</a>
    </div>
</div>