{% extends 'IntranetBundle:Index:servidor.html.twig' %}

{% block headerTitle %}DGP > Formações{% endblock %}

{% block body %}
    <a class="btn btn-primary" href="{{ path('dgp_formacao_cadastrar') }}">
        <span class="glyphicon glyphicon-plus"></span> Nova Formação
    </a>
    {% if formacoes is empty %}
        Nenhuma formação cadastrada
    {% else %}
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>Nome</th>
                    <th>Carga Horária</th>
                    <th>Data de Início</th>
                    <th>Data de Término</th>
                    <th>Opções</th>
                </tr>
            </thead>
            <tbody>
                {% for formacao in formacoes %}
                    <tr>
                        <td>{{ formacao.nome }}</td>
                        <td>{{ formacao.cargaHoraria }}</td>
                        <td>{{ formacao.dataInicioFormacao|date('d/m/Y') }}</td>
                        <td>{{ formacao.dataTerminoFormacao|date('d/m/Y') }}</td>
                        <td>
                            <a href="{{path('dgp_formacao_atualizar', {formacao: formacao.id})}}">
                                <img title="Alterar" style="cursor: pointer; width: 16px;" src="{{asset('lib/images/edit.png')}}" />
                            </a>
                            <a class="excluiFormacao" href="{{path('dgp_formacao_excluir', {formacao: formacao.id})}}">
                                <img title="Excluir" style="cursor: pointer; width: 16px;" src="{{asset('lib/images/delete.png')}}" />
                            </a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        {% if totalPaginas > 1 %}
            <ul class="pagination">
                {% if pagina == 1 %}
                    <li class="disabled"><span>&laquo;</span></li>
                {% else %}
                    <li><a href="{{ path('dgp_formacao_listar') }}">&laquo;</a></li>
                {% endif %}
                {% for i in 1..totalPaginas %}
                    {% if pagina == i %}
                        <li class="active"><span>{{ i }}</span></li>
                    {% else %}
                        <li><a href="{{ path('dgp_formacao_listar', { page: i }) }}">{{ i }}</a></li>
                    {% endif %}
                {% endfor %}
                {% if pagina == totalPaginas %}
                    <li class="disabled"><span>&raquo;</span></li>
                {% else %}
                    <li><a href="{{ path('dgp_formacao_listar', { page: totalPaginas }) }}">&raquo;</a></li>
                {% endif %}
            </ul>
        {% endif %}
    {% endif %}
{% endblock %}

{% block javascript %}
    {{parent()}} 
    <script type="text/javascript">
        $('document').ready(function (){
            $(".excluiFormacao").click( function(ev) {                
                if(!confirm("Realmente deseja excluir esta formação?")) {
                    ev.preventDefault();
                }
            });
        });
    </script>
{% endblock %}