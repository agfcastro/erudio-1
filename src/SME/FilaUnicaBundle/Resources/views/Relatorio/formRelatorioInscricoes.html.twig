{% extends 'FilaUnicaBundle:Index:index.html.twig' %}

{% block headerTitle %} Fila Única > Relatórios > Inscrições {% endblock %}

{% block page %}
    <ul class="nav nav-tabs">
        <li class="active"><a href="#">Inscrições</a></li>
        <li><a href="{{path('fu_relatorio_formRelatorioVagas')}}">Vagas</a></li>
        <li><a href="{{path('fu_relatorio_gerarPrevisaoFila')}}">Previsão da Fila</a></li>
    </ul>
    <form id="formRelatorioChamadas" method="post" action="{{path('fu_relatorio_gerarRelatorioInscricoes')}}">
        <div class="row">
            <div class="col-lg-4">
                <label for="filtroPeriodo">Filtrar por data:</label>
                <select id="filtroPeriodo" name="filtroPeriodo" required class="form-control" >
                    <option value="">Não</option>
                    <option value="dataChamada">Data de Chamada</option>
                    <option value="dataCadastro">Data de Cadastro</option>
                </select>
            </div>
            <div class="col-lg-4">
                <label for="dataInicio">Inicío do Período:</label>
                <input id="dataInicio" name="dataInicio" required type="text" class="form-control datepickerSME" />
            </div>
            <div class="col-lg-4">
                <label for="dataTermino">Término do Período:</label>
                <input id="dataTermino" name="dataTermino" required type="text" class="form-control datepickerSME" />
            </div>
        </div>
        <div class="row">
            <div class="col-lg-3">
                <label for="tipoInscricao">Tipo de Inscrição:</label>
                <select id="tipoInscricao" name="tipoInscricao" class="form-control" required >
                    <option value="">Todos</option>
                    {% for tipo in tiposInscricao %}
                        <option value="{{tipo.id}}">{{tipo.nome}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-lg-3">
                <label for="status">Status:</label>
                <select id="status" name="status" class="form-control" required >
                    <option value="">Todos</option>
                    {% for st in status %}
                        <option value="{{st.id}}">{{st.nome}}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="col-lg-3">
                <label for="processoJudicial">Processo Judicial:</label> <br /> 
                <input id="processoJudicial" name="processoJudicial" value="1" type="radio" /> Sim 
                <input id="processoJudicial" name="processoJudicial" value="0" type="radio"checked /> Não
            </div>
            <div class="col-lg-3">
                <label for="filtroNaoMatriculados">Ocultar matriculados:</label> <br /> 
                <input id="filtroNaoMatriculados" name="filtroNaoMatriculados" value="1" type="radio" /> Sim 
                <input id="filtroNaoMatriculados" name="filtroNaoMatriculados" value="0" type="radio"checked /> Não
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6">
                <button id="btnGerar" type="button" class="btn btn-primary">Gerar</button>
                <button id="btnImprimir" type="button" class="btn btn-primary">Imprimir</button>
            </div>
        </div>
    </form>
    <div id="divRelatorio" style="padding-top: 1.1em;"></div>
{% endblock %}

{% block javascript %}
    {{parent()}}
    <script type="text/javascript" src="{{asset('lib/jquery/printThis.js')}}"></script>
    <script type="text/javascript">
        $("#btnGerar").click( function() {
            $.ajax({
                type: "POST",
                url: $("#formRelatorioChamadas").attr("action"),
                data: $("#formRelatorioChamadas").serialize(),
                success: function(retorno){
                    $("#divRelatorio").html(retorno);  
                }
            });
        });
        $("#btnImprimir").click( function() {
            $("#divRelatorio").printThis({
                importCSS: true,
                printContainer: false,
                pageTitle: "Relatório - Fila Única",
                removeInline: false,
                formValues: true
            });
        });
    </script>
{% endblock %}
