{% extends '::templateModal.html.twig' %}

{% block modalTitle %}Suporte TÃ©cnico > Atividades > Nova{% endblock %}

{% block modalBody %}
    {{form_start(form, {'attr': {'id': 'atividade_formCadastro'} })}}
        <div class="row" id="formErrors"> {{ errors|raw }} </div>
        <div class="row">
            <div class="col-lg-6">
                {{form_label(form.inicio)}}
                {{form_widget(form.inicio, {'attr': {'class': 'form-control datetimepickerSME'} })}}
            </div>
            <div class="col-lg-6">
                {{form_label(form.termino)}}
                {{form_widget(form.termino, {'attr': {'class': 'form-control datetimepickerSME'} })}}
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                {{form_label(form.tecnicos)}}
                <br /> {{form_widget(form.tecnicos, {'attr': {'class': 'form-control multiselect'} })}}
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                {{form_label(form.descricao)}}
                {{form_widget(form.descricao, {'attr': {'class': 'form-control'} })}}
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                {{form_widget(form.btnSalvar, {'attr': {'class': 'ajaxSubmit btn btn-primary'} })}}
            </div>
        </div>
    {{form_end(form)}}
{% endblock %}

{% block javascript %}
    {{parent()}}
    <script type="text/javascript" src="{{asset('lib/bootstrap/dist/js/bootstrap-multiselect.js')}}" ></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.multiselect').multiselect({ 
                maxHeight: 250,
                enableCaseInsensitiveFiltering: true,
                filterPlaceholder: "Pesquisar"
            });
        });
        
        $("#atividade_FormCadastro").submit(function(ev) {
            $.ajax({
                type: "POST",
                url: "{{form.vars.action}}",
                data: $("#atividade_FormCadastro").serialize(),
                success: function(retorno) {
                    $("#divModal").html(retorno);
                }
            });
            $('#modalDialog').modal("show");
            ev.preventDefault();
        });
    </script>
{% endblock %}

{% block css %}
    {{parent()}}
    <link rel="stylesheet" type="text/css" src="{{asset('lib/bootstrap/dist/css/bootstrap-multiselect.css')}}" ></script>
{% endblock %}
