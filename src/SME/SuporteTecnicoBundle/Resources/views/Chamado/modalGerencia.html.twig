{% extends '::templateModal.html.twig' %}

{% block modalTitle %}Suporte Técnico > Chamados > Nº {{chamado.id}}{% endblock %}

{% block modalBody %}

{% if is_granted('ROLE_SUPORTE_ADMIN') %}
    {% include 'SuporteTecnicoBundle:Chamado:formEdicao.html.twig' with {'form': form, 'chamado': chamado} %}
{% else %}
    <div id="informacoes" class="panel panel-default">
        <div class="panel-heading">
            <strong>Informações</strong>
        </div>
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-12">
                    <strong>Categoria:</strong> {{chamado.categoria.nomeHierarquico}} 
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <strong>Solicitante:</strong> {{chamado.pessoaCadastrou.nome}}
                </div>
                <div class="col-lg-6">
                    <strong>Data de Criação:</strong> {{chamado.dataCadastro|date('d/m/Y')}}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <strong>Local:</strong> {{chamado.local.nome}}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6">
                    <strong>Prioridade:</strong> {{chamado.prioridade.nome}}
                </div>
                <div class="col-lg-6">
                    <strong>Status:</strong> {{chamado.status.nome}}
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <strong>Descrição:</strong> 
                    <p>{{chamado.descricao|trim}}</p>
                </div>
            </div>
            {% if not chamado.ativo %}
                <div class="row">
                    <div class="col-lg-12">
                        <strong>Solução:</strong> 
                        <p>{{chamado.solucao|trim}}</p>
                    </div>
                </div>
            {% endif %}
        </div>
    </div>
{% endif %}

{% include 'SuporteTecnicoBundle:Atividade:atividades.html.twig' with {'chamado': chamado} %}

{% include 'SuporteTecnicoBundle:Anotacao:anotacoes.html.twig' with {'chamado': chamado} %}

{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        $(".ajaxLink").click(function(ev) {
            $.ajax({
                type: "GET",
                url: $(this).attr("href"),
                success: function(retorno) {
                    $("#divModal").html(retorno);
                }
            });
            $('#modalDialog').modal("show");
            ev.preventDefault();
        });
    </script>
{% endblock %}

