{% extends app.request.isXmlHttpRequest ? '::templateAjax.html.twig' : '::template.html.twig' %}

{% block css %}
    {{parent()}}
{% endblock %}

{% block headerTitle %}Inscrever Estagiário{% endblock %}

{% block body %}
    <form method='POST'>
        <div class="row" style="margin: 1rem;">
                <div class="col-md-6">
                    <label>Nome:</label>
                    <input type="text" class="form-control" name="nomeEstagio" id="nomeEstagio" placeholder='Nome' />
                </div>
                <div class="col-md-6">
                    <label>CPF:</label>
                    <input type="text" class="form-control" name="cpfEstagio" id="cpfEstagio" placeholder='CPF' />
                </div>
                <div class="col-md-6">
                    <label>E-mail:</label>
                    <input type="text" class="form-control" name="emailEstagio" id="emailEstagio" placeholder='E-mail' />
                </div>
                <div class="col-md-6">
                    <label>Data de Nascimento:</label>
                    <input type="text" class="form-control" name="dataEstagio" id="dataEstagio" placeholder='Data de Nascimento' />
                </div>
                <div class="col-md-6">
                    <label>Início do Estágio(Observação):</label>
                    <input type="text" class="form-control" name="inicioObsEstagio" id="inicioObsEstagio" placeholder='Início do Estágio - Observação' />
                </div>
                <div class="col-md-6">
                    <label>Final do Estágio(Observação):</label>
                    <input type="text" class="form-control" name="finalObsEstagio" id="finalObsEstagio" placeholder='Final do Estágio - Observação' />
                </div>
                <div class="col-md-6">
                    <label>Início do Estágio(Intervenção):</label>
                    <input type="text" class="form-control" name="inicioEstagio" id="inicioEstagio" placeholder='Início do Estágio - Intervenção' />
                </div>
                <div class="col-md-6">
                    <label>Final do Estágio(Intervenção):</label>
                    <input type="text" class="form-control" name="finalEstagio" id="finalEstagio" placeholder='Final do Estágio - Intervenção' />
                </div>
                <div class="col-md-6">
                    <label>Telefone:</label>
                    <input type="text" class="form-control" name="telefoneEstagio" id="telefoneEstagio" placeholder='Telefone' />
                </div>
                <div class="col-md-6">
                    <label>Unidade:</label>
                    <select id="unidade_vagas" name="unidade_vagas" class="form-control">
                        <option></option>
                        {% for entidade in entidades %}
                            <option value="{{ entidade.pessoaJuridica.id }}">{{ entidade.pessoaJuridica.nome }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Turno:</label>
                    <select id="turno_vagas" name="turno_vagas" class="form-control">
                        <option></option>
                        {% for turno in turnos %}
                            <option value="{{ turno.id }}">{{ turno.nome }}</option>
                        {% endfor %}
                    </select>
                </div>
                <div class="col-md-6">
                    <label>Vaga pretendida:</label>
                    <select class="form-control" name="vagaEstagio" id="vagaEstagio">
                        
                    </select>
                </div>
        </div>
        <div class="row" style="margin: 1rem;">
            <div class="col-md-12"><input type="submit" class="form-control btn btn-primary" value='Inscrever' /></div>
        </div>
    </form>
{% endblock %}

{% block javascript %}
    {{parent()}}
    <script type="text/javascript" src="{{asset('lib/jquery/jquery.maskedinput.min.js')}}"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#dataEstagio").mask("99/99/9999");
            $("#inicioEstagio").mask("99/99/9999");
            $("#finalEstagio").mask("99/99/9999");
            $("#inicioObsEstagio").mask("99/99/9999");
            $("#finalObsEstagio").mask("99/99/9999");
            $("#telefoneEstagio").mask("(99)99999999?9");
            
            $("#unidade_vagas, #turno_vagas").change(function(){
                var unidade = $("#unidade_vagas").val();
                var turno = $("#turno_vagas").val();
                if (unidade !== '' || turno !== '') {
                    $.ajax({
                        url: '{{ path('buscar_vagas') }}',
                        dataType: 'html',
                        type: 'POST',
                        data: { 'unidade_vagas': unidade, 'turno_vagas': turno },
                        success: function (data) {
                            $('#vagaEstagio').html(data);
                        }
                    });
                }
            });
        });
    </script>
{% endblock %}
