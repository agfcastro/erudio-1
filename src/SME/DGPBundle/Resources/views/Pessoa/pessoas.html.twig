{% block body %}
    <table class="table table-striped table-hover tableDGP">
        <thead>
            <tr>
                <th>Servidor</td>
                <th>CPF</th>
                <th>Data Nascimento</td>
                <th>Email</td>
                <th>Ativo</td>
            </tr>
        </thead>
        <tbody>
            {% for result in results %}
                <tr>
                    <td><a href="{{ path('dgp_pessoa_alterar', { 'pessoa': result.id }) }}">{{ result.nome }}</a></td>
                    <td>{{ result.cpf|cpf }}</td>
                    <td>{{ result.dataNascimento|date('d/m/Y') }}</td>
                    <td>{{ result.email }}</td>
                    {% if result.ativo %}
                        <td><img src="{{ asset('lib/images/ok.png') }}" /></td>
                    {% else %}
                        <td><img src="{{ asset('lib/images/error.png') }}" /></td>
                    {% endif %}
                </tr>
            {% else %}
                <tr>
                    <td colspan="5" class="text-center">Nenhuma pessoa encontrada</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if pages > 1 %}
        <div id="row">
            {% if paginaAnterior > 0 %}
                <a class="goToPage" style="cursor:pointer;" title="Primeira Página" label="1"><img src="{{ asset('lib/images/first.png') }}" /></a>
                <a class="goToPage" style="cursor:pointer;" title="Página Anterior" label="{{ paginaAnterior }}"><img src="{{ asset('lib/images/prev.png') }}" /></a>
            {% endif %}
            {% for i in 1..pages %}
                {% if i == page %}<strong>{% endif %}
                    <a style="cursor:pointer;" class="goPage">{{ i }}</a>
                {% if i == page %}</strong>{% endif %}
            {% endfor %}
            {% if proximaPagina < pages %}
                <a class="goToPage" style="cursor:pointer;" title="Próxima Página" label="{{ proximaPagina }}"><img src="{{ asset('lib/images/next.png') }}" /></a>
                <a class="goToPage" style="cursor:pointer;" title="Última Página" label="{{ pages }}"><img src="{{ asset('lib/images/last.png') }}" /></a>
            {% endif %}
        </div>
    {% endif %}
{% endblock %}

{% block javascript %}
    <script type="text/javascript">
        $(document).ready(function (){
            $(".goPage").click(function(ev){
                ev.preventDefault();
                $.ajax({
                        url: '{{ path('dgp_pessoa_pesquisar') }}?page='+$(this).html(),
                        type: 'POST',
                        data: $("#searchForm").serialize(),
                        success: function (data)
                        {
                            $("#ajaxList").html(data);
                        }
                });
            });

            $(".goToPage").click(function(ev){
                ev.preventDefault();
                $.ajax({
                        url: '{{ path('dgp_pessoa_pesquisar') }}?page='+$(this).attr('label'),
                        type: 'POST',
                        data: $("#searchForm").serialize(),
                        success: function (data)
                        {
                            $("#ajaxList").html(data);
                        }
                });
            });
        });
    </script>
{% endblock %}